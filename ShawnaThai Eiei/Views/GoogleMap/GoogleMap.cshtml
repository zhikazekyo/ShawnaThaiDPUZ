@model List<ShawnaThai_Eiei.Models.Cooperative>
@{
    ViewBag.Title = "GoogleMap";
}
<!DOCTYPE html>
<html lang="en">
<head>
    <style>
        html, body {
            height: 100%;
            margin: 0;
            padding: 0;
        }

        #map {
            width: 80%;
            height: 750px;
            top: 100%;
            left: 10%;
            background-color: grey;
        }

        div {
            color: black
        }
    </style>

</head>
<body id="page-top">
    <header class="masthead">
        <br><br><br><br><br>
        <a class="btn btn-xl">แผนที่สหกรณ์</a><br><br>
        <div id="map"></div>
        <script type="text/javascript">
            var map;
            var mgr;

            @*var myArray = [];
            @foreach (var item in Model)
            {
                @:myArray.push('@item');

            }*@

            function initMap() {
			var mapOptions = {
			  center: {lat: 13.870298, lng: 100.5498615},
			  zoom: 16,
			}
             var info = new google.maps.InfoWindow();
			var maps = new google.maps.Map(document.getElementById("map"),mapOptions);


                   @foreach (var item in Model) {
        <text>

              var marker = new google.maps.Marker({
				   position: new google.maps.LatLng(@item.Coop_Latitude, @item.Coop_Longitude),
				   map: maps,
                   title: "@item.Coop_Name",
                   infoWindowIndex : "@item.Coop_Tel "
				});


			  google.maps.event.addListener(marker, 'click', (function(maps, marker) {
				return function() {
				  info.setContent("ชื่อสหกรณ์ : "+"@item.Coop_Name"+",  ที่อยู่: บ้านเลขที่ " + "@item.Coop_A_No"+ ", ตำบล "+"@item.Coop_A_Sup"+", อำเภอ "+"@item.Coop_A_District"+", ติดต่อ:"+"@item.Coop_Tel");
				  info.open(maps, marker);
				}
              })(maps, marker));
        </text>
                    }
		    }

        </script>
        <script async defer src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBGWlbIKRjQV1WUujX7AlfU9VXgbZp-230&callback=initMap">
        </script>
        <br><br><br><br>
    </header>
</body>
</html>
